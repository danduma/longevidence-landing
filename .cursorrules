## Project structure
- this project is a full stack app with a Python FastAPI backend, a React frontend, and a PostgreSQL database

## Development best practices
- avoid hardcoding any values in the code. ALWAYS use environment variables: urls, ports, component colors, etc.
- **Always run the linter after any edit!**
- When generating commit messages, never add "Co-Authored-By:" or "Generated with [Claude Code]" or any other message to indicate AI authorship, it's just cruft and not pertinent.
- NEVER create a new branch unless I specifically ask you to

## Testing Commands
Use TypeScript compilation checks instead of running the dev server:
- `tsc --noEmit --skipLibCheck` - Check TypeScript without emitting files
Write and run python unit tests

## Communication Style
- Keep your explanations short, succinct and useful, don't generate a wall of text. 


## Python and backend instructions
- ALWAYS:
	- use uv for Python package management, never pip.
	- use pyproject.toml , never requirements.txt
	- use podman for container management, never docker. E.g. "podman compose", no hyphen.
	- use unittest for generating tests, never pytest
- NEVER run pip!!! Use uv instead. If you need to install a package, use uv add <package> or uv pip install <package>
- When running a file, always run it with "uv run"
- The current project will not be run as a module. Make sure the imports are appropriate to run as individual files.
- NEVER INSTALL THE CURRENT PROJECT. Use "uv run" if just running with "python" has any issues.
- When writing Python code, ALWAYS make sure that all dates are timezone-aware, particularly after loading from sqlite. Use pytz
- Unless an import is conditional, all imports should appear before any method / class definition
- When a directory is not writable, you don't change the path to a new directory. You make that directory writable.
- You ALWAYS use SQLModel, not SQLAlchemy directly unless there is no alternative.
- When you write SQL as text, make sure it works in both SQLite and Postgresql
- In SQLModel and SQLAlchemy, the property "metadata" is a reserved word. NEVER define a class with a .metadata attribute, always call it something else
- Vector embeddings: never assume their size. It might say OpenAI in the class names but simply be a compatible API. Don't change the dimensions of the vectors!
- LLM models: never assume a model doesn't exist! You don't have the latest info on model names, they add new ones daily.
- Before running a command, check pwd, you might already be in the directory.
- When debugging a service, database, system, runtime error: Reflect on 5-7 different possible sources of the problem, distill those down to 1-2 most likely sources, and then add logs to validate your assumptions before we move onto implementing the actual code fix

# Frontend

## JS and frontend instructions
- **NEVER RUN `npm run dev`** - This starts a development server which should only be done by the user manually.
- **NEVER MODIFY** files in /shared/components/ui/ - use wrappers in /frontend/src/components/ui/ instead
- never write to index.css. It's auto-generated by Tailwind. Add all css customizations to custom.css.
- all visual components should shadcn/ui where available. Do not implement new ones unless absolutely necessary!
- avoid running "npm run build", instead you can just check the linter to spot any errors
- `npm run lint` - Run linting checks

## React Best Practices
- MutableRefObject is deprecated in react! Use RefObject instead.
- NEVER use require() to import modules. Use import instead.
- ALWAYS centralize all state in global "single source of truth" Manager classes. Components/listeners subscribe to updates from Managers, use methods of Managers to update data.
- Always implement a custom data manager for any data structure, NEVER USE separate state variables and arrays.
- NEVER send data around in transactions!!
- Avoid using useEffect() to update state. Instead, use useCallback() to update state.
- Avoid callback hell, race conditions, and infinite loops.
- Always add i18n translations when adding new strings to the UI. Use t(<key>, {}, <english_string>), update all .json files in "/shared/locales/"
- NEVER store string literals or UI settings for the frontend in the .env file!!! Either literals in the files, inline in arrays, or in .json files.
- If you try to fix something and it doesn't work, think hard: is this a RACE CONDITION? They are super common in react.

## Web design
- ONLY use shadcn/ui components. Never implement your own buttons, dropdowns, modals unless they simply don't exist. Install the shadcn components as required.
- Instead of emojis, use icons. Use lucide-react where possible
- Fix the padding so every component is spaced perfectly - not too close to other components but not too dispersed to waste space.
- The site must look sleek, premium, and minimalist, like a spa in Switzerland. Design this in a way that matches what a working professional would reasonably pay thousands of dollars a month for, in a way that would make Steve Jobs smile. 
- Avoid using colors unnecessarily, instead pick from a palette that is cohesive and stick to it. Ensure the site is responsive and elegant on both desktop and mobile